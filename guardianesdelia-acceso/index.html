<script>
function register() {
  const user = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();
  if (!user || !pass) return alert("Completa usuario y contraseña");
  const users = JSON.parse(localStorage.getItem('users') || '{}');
  if (users[user]) return alert("Usuario ya existe");
  users[user] = { password: pass, achievements: [], bookmarks: [] };
  localStorage.setItem('users', JSON.stringify(users));
  localStorage.setItem('currentUser', user);
  alert("Registrado con éxito");
  // Redirige a la página principal
  window.location.href = `https://guardianesdelia.world/?user=${encodeURIComponent(user)}`;
}

function login() {
  const user = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();
  const users = JSON.parse(localStorage.getItem('users') || '{}');
  if (!users[user] || users[user].password !== pass) return alert("Credenciales inválidas");
  localStorage.setItem('currentUser', user);
  // Redirige a la página principal
  window.location.href = `https://guardianesdelia.world/?user=${encodeURIComponent(user)}`;
}

function loginAnon() {
  localStorage.setItem('currentUser', '_anon');
  // Redirige a la página principal como anónimo
  window.location.href = `https://guardianesdelia.world/?user=anonimo`;
}
</script>
